
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ù†Øµ - Ù…ØªØ¬Ø§ÙˆØ¨Ø© ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
    :root { --primary: #4CAF50; --accent: #e91e63; --bg-start: #667eea; --bg-end: #764ba2; --text-light: #fff; }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Cairo', sans-serif; direction: rtl; min-height: 100vh;
      background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
      display: flex; justify-content: center; align-items: center; color: var(--text-light); padding: 10px;
    }
    .container {
      background: rgba(255,255,255,0.1); padding: 20px; border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2); backdrop-filter: blur(10px);
      max-width: 500px; width: 100%;
    }
    h2 { font-size: 1.5rem; font-weight: 700; text-align: center; margin-bottom: 16px; }
    .controls { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 16px; }
    select, .controls button {
      font-size: 1rem; padding: 12px; border: none; border-radius: 50px;
      cursor: pointer; transition: transform .2s ease, box-shadow .2s ease;
      flex: 1 1 45%; max-width: 200px; display: flex; align-items: center; justify-content: center;
    }
    select { background: rgba(255,255,255,0.2); color: var(--text-light); }
    select:focus, select:hover { background: rgba(255,255,255,0.3); }
    .controls button { background: var(--primary); color: var(--text-light); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
    .controls button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.4); }
    .controls button.recording { background: var(--accent); animation: pulse 1.5s infinite; }
    @keyframes pulse { 0%,100%{box-shadow:0 0 0 0 rgba(233,30,99,0.7);}50%{box-shadow:0 0 0 20px rgba(233,30,99,0);} }
    .output {
      background: rgba(255,255,255,0.2); padding: 16px; min-height: 120px; border-radius: 12px;
      font-size: 1rem; line-height: 1.4; text-align: right; overflow-wrap: break-word; white-space: pre-wrap;
    }
    .typing-effect { border-right:2px solid var(--text-light); animation:typing 2.5s steps(30,end),blink .75s step-end infinite; white-space:nowrap; overflow:hidden; }
    @keyframes typing{from{width:0}to{width:100%}} @keyframes blink{50%{border-color:transparent}}
    @media(max-width:400px){ h2{font-size:1.25rem;} select,.controls button{padding:10px;font-size:.9rem;} .output{font-size:.9rem;padding:14px;} }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ™ï¸ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ù†Øµ</h2>
    <div class="controls">
      <select id="languageSelect">
        <option value="ar-SA">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        <option value="en-US">English</option>
      </select>
      <button id="recordBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
      <button id="resetBtn">Ù…Ø³Ø­ Ø§Ù„Ù†Øµ</button>
      <button id="copyBtn">Ù†Ø³Ø® Ø§Ù„Ù†Øµ</button>
    </div>
    <div class="output" id="outputText">Ø§Ù„Ù†Øµ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§...</div>
  </div>

  <script>
    const recordBtn = document.getElementById('recordBtn');
    const resetBtn = document.getElementById('resetBtn');
    const copyBtn = document.getElementById('copyBtn');
    const outputText = document.getElementById('outputText');
    const languageSelect = document.getElementById('languageSelect');

    let recognition;
    let isRecording = false;
    if ('webkitSpeechRecognition' in window) {
      recognition = new webkitSpeechRecognition();
    } else if ('SpeechRecognition' in window) {
      recognition = new SpeechRecognition();
    } else {
      outputText.textContent = 'Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ù†Øµ Ù…Ø¨Ø§Ø´Ø±Ø©. Ø§Ø³ØªØ®Ø¯Ù… Chrome Ø£Ùˆ Edge.';
      throw new Error('Unsupported SpeechRecognition');
    }

    recognition.continuous = false;
    recognition.interimResults = false;

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†
    if (navigator.permissions) {
      navigator.permissions.query({ name: 'microphone' }).then(res => {
        if (res.state === 'denied') {
          outputText.textContent = 'ÙŠØ±Ø¬Ù‰ Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† Ù„Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙØ­.';
        }
      });
    }

    // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¨Ø¯Ø¡/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø²Ø±
    recordBtn.addEventListener('click', () => {
      if (isRecording) {
        recognition.stop();
        return;
      }
      // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
      outputText.textContent = '';
      outputText.classList.remove('typing-effect');
      recordBtn.classList.add('recording');
      recordBtn.textContent = 'Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„';
      recognition.lang = languageSelect.value;
      recognition.start();
      isRecording = true;
    });

    // Ø¹Ù†Ø¯ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø©
    recognition.onresult = e => {
      const transcript = e.results[0][0].transcript;
      outputText.textContent = transcript;
      outputText.classList.add('typing-effect');
    };

    // Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ« Ø®Ø·Ø£
    recognition.onerror = e => {
      if (e.error === 'not-allowed') {
        outputText.textContent = 'Ø±ÙØ¶Øª Ø§Ù„Ø¥Ø°Ù† Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†.';
      } else {
        outputText.textContent = 'Ø®Ø·Ø£: ' + e.error;
      }
    };

    // Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
    recognition.onend = () => {
      isRecording = false;
      recordBtn.classList.remove('recording');
      recordBtn.textContent = 'Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³Ø¬ÙŠÙ„';
    };

    // Ø£Ø²Ø±Ø§Ø± Ù…Ø³Ø­ ÙˆÙ†Ø³Ø®
    resetBtn.addEventListener('click', () => {
      outputText.textContent = '';
      outputText.classList.remove('typing-effect');
    });
    copyBtn.addEventListener('click', () => {
      const text = outputText.textContent;
      if (!text) return;
      navigator.clipboard.writeText(text).then(() => {
        copyBtn.textContent = 'ØªÙ… Ø§Ù„Ù†Ø³Ø®!';
        setTimeout(() => (copyBtn.textContent = 'Ù†Ø³Ø® Ø§Ù„Ù†Øµ'), 2000);
      });
    });
  </script>
</body>
</html>
